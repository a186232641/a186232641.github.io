<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>傻瓜式搭建加奈飞解锁</title>
      <link href="/2023/08/26/%E5%82%BB%E7%93%9C%E5%BC%8F%E6%90%AD%E5%BB%BA%E5%8A%A0%E5%A5%88%E9%A3%9E%E8%A7%A3%E9%94%81/"/>
      <url>/2023/08/26/%E5%82%BB%E7%93%9C%E5%BC%8F%E6%90%AD%E5%BB%BA%E5%8A%A0%E5%A5%88%E9%A3%9E%E8%A7%A3%E9%94%81/</url>
      
        <content type="html"><![CDATA[<h1 id="一键搭梯过墙"><a href="#一键搭梯过墙" class="headerlink" title="一键搭梯过墙"></a>一键搭梯过墙</h1><p>前提条件：</p><ol><li>一台VPS</li><li>一个域名</li><li>域名解析到主机</li></ol><h2 id="Linux-一键重装系统"><a href="#Linux-一键重装系统" class="headerlink" title="Linux 一键重装系统"></a>Linux 一键重装系统</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget -N --no-check-certificate <span class="string">&quot;https://raw.githubusercontent.com/chiakge/installNET/master/Install.sh&quot;</span></span><br><span class="line"><span class="built_in">chmod</span> +x Install.sh</span><br><span class="line">./Install.sh</span><br></pre></td></tr></table></figure><ul><li>安装Debian11系统 -2-3</li></ul><p><img src="/2023/08/26/%E5%82%BB%E7%93%9C%E5%BC%8F%E6%90%AD%E5%BB%BA%E5%8A%A0%E5%A5%88%E9%A3%9E%E8%A7%A3%E9%94%81/hanfeilong/Hexo/source/_posts/%E5%82%BB%E7%93%9C%E5%BC%8F%E6%90%AD%E5%BB%BA%E5%8A%A0%E5%A5%88%E9%A3%9E%E8%A7%A3%E9%94%81/202308261207150.webp" alt="202307270934512"></p><h2 id="安装最新内核-BBR-脚本卸载内核版本"><a href="#安装最新内核-BBR-脚本卸载内核版本" class="headerlink" title="安装最新内核 BBR 脚本卸载内核版本"></a>安装最新内核 BBR 脚本卸载内核版本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O tcp.sh <span class="string">&quot;https://github.com/ylx2016/Linux-NetSpeed/raw/master/tcp.sh&quot;</span> &amp;&amp; <span class="built_in">chmod</span> +x tcp.sh &amp;&amp; ./tcp.sh</span><br></pre></td></tr></table></figure><ul><li><p>安装BBR原版内核 -1-11</p></li><li><p>安装 BBRplus 新版内核 -5-19</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/a186232641/images/img/202308261211696.webp" alt="202307270934513"></p><h2 id="安装代理"><a href="#安装代理" class="headerlink" title="安装代理"></a>安装代理</h2><h3 id="VLESS-TCP-Vision、Reality、gRPC八合一共存脚本"><a href="#VLESS-TCP-Vision、Reality、gRPC八合一共存脚本" class="headerlink" title="VLESS (TCP_Vision、Reality、gRPC八合一共存脚本"></a><a href="https://github.com/mack-a/v2ray-agent">VLESS (TCP_Vision、Reality、gRPC八合一共存脚本</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -P /root -N --no-check-certificate <span class="string">&quot;https://raw.githubusercontent.com/mack-a/v2ray-agent/master/install.sh&quot;</span> &amp;&amp; <span class="built_in">chmod</span> 700 /root/install.sh &amp;&amp; /root/install.sh</span><br></pre></td></tr></table></figure><p><a href="https://www.v2ray-agent.com/archives/1682491479771">八合一一键脚本，快速搭建教程</a></p><ul><li>VLESS+TLS_Vision+TCP[推荐〕</li><li>VLESS+Realityt+uTLSt+Vision[推荐〕</li></ul><p><img src="https://cdn.jsdelivr.net/gh/a186232641/images/img/202308261213136.webp" alt="202307270934514"></p><h2 id="解锁流媒体"><a href="#解锁流媒体" class="headerlink" title="解锁流媒体"></a>解锁流媒体</h2><p>这里推荐<a href="https://github.com/LaoYiZi-Media/unblock/wiki/%E8%80%81%E5%A7%A8%E5%AD%90%E8%A7%A3%E9%94%81">老姨子解锁</a>个人免费使用</p><p><img src="https://cdn.jsdelivr.net/gh/a186232641/images/img/202308261216389.png" alt="截屏2023-08-26 12.15.56"></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 科学上网 </tag>
            
            <tag> 流媒体解锁 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git命令</title>
      <link href="/2023/08/25/git%E5%91%BD%E4%BB%A4/"/>
      <url>/2023/08/25/git%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="git"><a href="#git" class="headerlink" title="git"></a>git</h1><p>设置用户名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config —global [user.name](http://user.name) ‘aaa’</span><br></pre></td></tr></table></figure><p>设置邮箱</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config —global [user.](http://user.name)email  ‘a187@gmail.com’</span><br></pre></td></tr></table></figure><p>查看用户名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config —global [user.name](http://user.name)</span><br></pre></td></tr></table></figure><p>查看邮箱</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config —global [user.](http://user.name)email</span><br></pre></td></tr></table></figure><p>为常用指令配置别名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch ~/.bashrc</span><br></pre></td></tr></table></figure><p>git 初始化</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><h3 id="git-常用指令"><a href="#git-常用指令" class="headerlink" title="git 常用指令"></a>git 常用指令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git add (工作区—&gt;暂存区)</span><br><span class="line"></span><br><span class="line">git commit (暂存区—&gt;仓库)</span><br><span class="line"></span><br><span class="line">git status   查看文件状态</span><br></pre></td></tr></table></figure><p> 查看日志</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure><p>版本回退： </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset —hard commitid</span><br></pre></td></tr></table></figure><p> 查看已经删除的日志</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br></pre></td></tr></table></figure><p> 忽略仓库中的某些文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.gitignore</span><br></pre></td></tr></table></figure><h3 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h3><p>查看本地分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure><p>创建本地分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch   name</span><br></pre></td></tr></table></figure><p>切换分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout name</span><br></pre></td></tr></table></figure><p>分支重命名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -m old_name new_name</span><br></pre></td></tr></table></figure><p>切换并且创建</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout  -b name</span><br></pre></td></tr></table></figure><p>合并分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge</span><br></pre></td></tr></table></figure><p>删除分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch -d name</span><br><span class="line">git branch -D name. (如果分支没有merge到master上需要使用强制删除)</span><br></pre></td></tr></table></figure><p>添加远程仓库</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@github.com:a186232641/Hexo.git</span><br><span class="line">git remote add &lt;远端名称&gt;  &lt;仓库路径&gt;</span><br></pre></td></tr></table></figure><p>查看是否有远程仓库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote</span><br></pre></td></tr></table></figure><p>上传到远程仓库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure><p>这个问题是因为远程库与本地库不一致造成的，那么我们把远程库同步到本地库就可以了。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull --rebase origin master</span><br></pre></td></tr></table></figure><p>本地分支和远程分支进行绑定</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push —set-upstream origin master:master</span><br></pre></td></tr></table></figure><p>查看本地分支与远程分支的关系</p>]]></content>
      
      
      <categories>
          
          <category> 学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建v2ray+tls+ws</title>
      <link href="/2023/08/24/%E6%90%AD%E5%BB%BAv2ray-tls-ws/"/>
      <url>/2023/08/24/%E6%90%AD%E5%BB%BAv2ray-tls-ws/</url>
      
        <content type="html"><![CDATA[<h1 id="v2ray-tls-ws-搭建小白教程"><a href="#v2ray-tls-ws-搭建小白教程" class="headerlink" title="v2ray+tls+ws 搭建小白教程"></a>v2ray+tls+ws 搭建小白教程</h1><h2 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h2><ol><li><p>已经购买好的域名</p></li><li><p>国外的 vps</p></li><li><p>cloudfare 解析好域名</p><p>注意：搭建过程中不能开启小云朵</p></li></ol><h2 id="开始搭建"><a href="#开始搭建" class="headerlink" title="开始搭建"></a>开始搭建</h2><h3 id="连接-vps"><a href="#连接-vps" class="headerlink" title="连接 vps"></a>连接 vps</h3><p>略，这部分自行查阅教程</p><h3 id="更新-Linux-系统包"><a href="#更新-Linux-系统包" class="headerlink" title="更新 Linux 系统包"></a>更新 Linux 系统包</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br></pre></td></tr></table></figure><h3 id="安装-curl"><a href="#安装-curl" class="headerlink" title="安装 curl"></a>安装 curl</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install curl</span><br></pre></td></tr></table></figure><h3 id="安装-v2ray"><a href="#安装-v2ray" class="headerlink" title="安装 v2ray"></a>安装 v2ray</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-release.sh)</span><br></pre></td></tr></table></figure><h3 id="配置-v2ray"><a href="#配置-v2ray" class="headerlink" title="配置 v2ray"></a>配置 v2ray</h3><p>在命令行输入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/local/etc/v2ray/config.json</span><br></pre></td></tr></table></figure><p>将下面的代码粘贴到 config.json 文件中,文件中<strong>port</strong>、<strong>id</strong>、<strong>path</strong>可以修改为自己想要设定的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;log&quot;: &#123;</span><br><span class="line">        &quot;access&quot;: &quot;/var/log/v2ray/access.log&quot;,</span><br><span class="line">        &quot;error&quot;: &quot;/var/log/v2ray/error.log&quot;,</span><br><span class="line">        &quot;loglevel&quot;: &quot;warning&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;inbounds&quot;: [&#123;</span><br><span class="line">            &quot;port&quot;: 11055,</span><br><span class="line">            &quot;protocol&quot;: &quot;vmess&quot;,</span><br><span class="line">            &quot;settings&quot;: &#123;</span><br><span class="line">                &quot;clients&quot;: [&#123;</span><br><span class="line">                        &quot;id&quot;: &quot;27848739-7e62-4138-9fd3-098a63964b6b&quot;,</span><br><span class="line">                        &quot;level&quot;: 1,</span><br><span class="line">                        &quot;alterId&quot;: 0</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;streamSettings&quot;: &#123;</span><br><span class="line">                &quot;network&quot;: &quot;ws&quot;,</span><br><span class="line">                &quot;wsSettings&quot;: &#123;</span><br><span class="line">                    &quot;path&quot;: &quot;/tech&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    &quot;outbounds&quot;: [&#123;</span><br><span class="line">            &quot;protocol&quot;: &quot;freedom&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="启动-v2ray-服务"><a href="#启动-v2ray-服务" class="headerlink" title="启动 v2ray 服务"></a>启动 v2ray 服务</h3><p>启动 v2ray</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start v2ray</span><br></pre></td></tr></table></figure><p>将 v2ray 设置成开机自动启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable v2ray</span><br></pre></td></tr></table></figure><h3 id="安装-nginx"><a href="#安装-nginx" class="headerlink" title="安装 nginx"></a>安装 nginx</h3><p>执行安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install -y nginx</span><br></pre></td></tr></table></figure><p>新建网页目录</p><p>这里的网页目录设置为/root/www(可以更换)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /root/www</span><br></pre></td></tr></table></figure><p>新建首页</p><p>在/root/www 目录下新建 index.html</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /root/www/index.html</span><br></pre></td></tr></table></figure><p>内容如下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>欢迎来到我的网站<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;styles.css&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>欢迎来到我的网站<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="配置-nginx"><a href="#配置-nginx" class="headerlink" title="配置 nginx"></a>配置 nginx</h3><p>命令行输入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><p>将以下配置粘贴到 nginx.conf 文件中 http 下,并将第一行 user www-data 改为 user root，即当前用户。</p><p>Server_name 是 cloudfare 中 DNS 解析好的域名</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">server<span class="punctuation">&#123;</span></span><br><span class="line">    listen <span class="number">80</span>;</span><br><span class="line">    server_name v1.xxxx.com;</span><br><span class="line">    index index.html;</span><br><span class="line">    root /root/www/;</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="启动-nginx"><a href="#启动-nginx" class="headerlink" title="启动 nginx"></a>启动 nginx</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx</span><br></pre></td></tr></table></figure><p>将 v2ray 设置成开机自动启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable nginx</span><br></pre></td></tr></table></figure><p>查看 nginx 启动状态</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status nginx</span><br></pre></td></tr></table></figure><p>常用的 nginx 命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart nginx  #重启nginx</span><br><span class="line">nginx -t #检查nginx.conf是否有错误</span><br></pre></td></tr></table></figure><p>验证 nginx 是否配置成功</p><p>在浏览器里访问<code>v1.xxxx.com</code>，如果正常则说明 nginx 配置没问题，这是是没有加密的，不带 HTTPS 的网址：<code>http://v1.xxxx.com</code>。</p><h3 id="安装-certbot-并申请-SSL-证书"><a href="#安装-certbot-并申请-SSL-证书" class="headerlink" title="安装 certbot 并申请 SSL 证书"></a>安装 certbot 并申请 SSL 证书</h3><p>安装 snapd</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install -y snapd</span><br></pre></td></tr></table></figure><p>确保 snapd 为最新版本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snap install core; snap refresh core</span><br></pre></td></tr></table></figure><p>安装 certbot</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snap install --classic certbot</span><br></pre></td></tr></table></figure><p>创建软链</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /snap/bin/certbot /usr/bin/certbot</span><br></pre></td></tr></table></figure><p>申请证书</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certbot --nginx</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/a186232641/images/img/202308251928652.jpg" alt="install-v2ray-on-debian-2021-1"></p><p>稍等一会，会提示证书安装成功！ 你会发现 nginx 的配置已经更改，我的<code>/etc/nginx/sites-enabled/default</code>文件被自动修改为以下内容：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">server<span class="punctuation">&#123;</span></span><br><span class="line">    server_name v1.xxxx.com;</span><br><span class="line">    index index.html;</span><br><span class="line">    root /root/www/;</span><br><span class="line"></span><br><span class="line">    listen <span class="number">443</span> ssl; # managed by Certbot</span><br><span class="line">    ssl_certificate /etc/letsencrypt/live/v1.xxxx.com/fullchain.pem; # managed by Certbot</span><br><span class="line">    ssl_certificate_key /etc/letsencrypt/live/v1.xxxx.com/privkey.pem; # managed by Certbot</span><br><span class="line">    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot</span><br><span class="line">    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot</span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">server<span class="punctuation">&#123;</span></span><br><span class="line">    if ($host = v1.xxxx.com) <span class="punctuation">&#123;</span></span><br><span class="line">        return <span class="number">301</span> https<span class="punctuation">:</span><span class="comment">//$host$request_uri;</span></span><br><span class="line">    <span class="punctuation">&#125;</span> # managed by Certbot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    listen <span class="number">80</span>;</span><br><span class="line">    server_name v1.xxxx.com;</span><br><span class="line">    return <span class="number">404</span>; # managed by Certbot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>此时，在浏览器里访问 v1.xxxx.com 已经是 https 开头的了，地址： <code>https://v1.xxxx.com</code>。</p><h3 id="添加-v2ray-转发"><a href="#添加-v2ray-转发" class="headerlink" title="添加 v2ray 转发"></a>添加 v2ray 转发</h3><p>将/etc/nginx/nginx.conf 更改为以下内容</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">server<span class="punctuation">&#123;</span></span><br><span class="line">    server_name v1.xxxx.com;</span><br><span class="line">    index index.html;</span><br><span class="line">    root /root/www/;</span><br><span class="line"></span><br><span class="line">    listen <span class="number">443</span> ssl; # managed by Certbot</span><br><span class="line">    ssl_certificate /etc/letsencrypt/live/v1.xxxx.com/fullchain.pem; # managed by Certbot</span><br><span class="line">    ssl_certificate_key /etc/letsencrypt/live/v1.xxxx.com/privkey.pem; # managed by Certbot</span><br><span class="line">    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot</span><br><span class="line">    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot</span><br><span class="line"></span><br><span class="line">   ## 添加这部分内容<span class="punctuation">,</span><span class="number">22055</span>对应/usr/local/etc/v2ray/config.json 里面inbounds端口</span><br><span class="line">   ## /tech客户端配置的时候需要<span class="punctuation">,</span>对应/usr/local/etc/v2ray/config.json streamSettings里的path</span><br><span class="line">    location /tech <span class="punctuation">&#123;</span></span><br><span class="line">        proxy_redirect off;</span><br><span class="line">        proxy_pass http<span class="punctuation">:</span><span class="comment">//127.0.0.1:11055;</span></span><br><span class="line">        proxy_http_version <span class="number">1.1</span>;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">server<span class="punctuation">&#123;</span></span><br><span class="line">    if ($host = v1.xxxx.com) <span class="punctuation">&#123;</span></span><br><span class="line">        return <span class="number">301</span> https<span class="punctuation">:</span><span class="comment">//$host$request_uri;</span></span><br><span class="line">    <span class="punctuation">&#125;</span> # managed by Certbot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    listen <span class="number">80</span>;</span><br><span class="line">    server_name v1.xxxx.com;</span><br><span class="line">    return <span class="number">404</span>; # managed by Certbot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>注意这里的 11055、 /tech</strong>要修改为 v2ray 对应的值，v1.xxxx.com 是你已经解析好的域名</p><p>然后运行,重启 nginx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure><p>下面是我在 shadowrocket 配置</p><p><img src="https://cdn.jsdelivr.net/gh/a186232641/images/img/202308251929158.png" alt="截屏2023-08-24 13.42.40"></p><p><img src="https://cdn.jsdelivr.net/gh/a186232641/images/img/202308251930731.png" alt="截屏2023-08-24 13.43.32"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 科学上网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>first blog</title>
      <link href="/2023/08/23/first-blog/"/>
      <url>/2023/08/23/first-blog/</url>
      
        <content type="html"><![CDATA[<h1 id="Blog"><a href="#Blog" class="headerlink" title="Blog"></a>Blog</h1><p>this is my first blog to celebrate the blog website</p>]]></content>
      
      
      
        <tags>
            
            <tag> blog </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>分类</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>标签</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
